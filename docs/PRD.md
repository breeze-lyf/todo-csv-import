# 产品PRD

# # **1. 背景与目标（Why）**

## **1.1 背景（Background）**

在人力外包行业中，员工合同、证件、证书、项目周期等事项的到期管理经常高度依赖人工记录（Excel / 手写 / 微信日程），极易出现漏记、晚记、重复记的情况。

合同到期提醒尤其关键，一旦未续签及时处理，可能导致：

- 合同断档
- 法律风险增加
- 人力成本剧烈上升
- 项目组与外包公司之间的协调混乱
- 绩效考核与合规流程出问题

现有工具（如手机日历、备忘录、企业 OA）不支持**批量导入**、**多次提醒**、**月历可视化**，导致项目成员需要重复、低效地手动维护提醒信息。

因此需要一个简单但强大的系统来统一管理提醒。

---

## **1.2 要解决的核心问题（Problem Statement）**

1. **合同/证件/关键事项容易忘记，人工维护不可靠**
2. **没有可视化日历无法直观看到未来几周的到期风险**
3. **没有批量导入功能，重复录入耗时且容易出错**
4. **提醒不够及时（手机日历只能单提醒）**
5. **客户希望多个提前提醒（7 天、3 天、1 天）、且不漏提醒**

---

## **1.3 为什么现在必须做（Why Now）**

- 项目组已进入人员规模增长阶段，合同量迅速增加
- 人力流动加速，人工管理成本上涨
- 公司推进“数字化工具”方向，需要降低人工风险
- 频繁发生“到期未续签”的情况，已经造成管理隐患

---

## **1.4 产品目标（Product Goals）**

### 🎯 核心目标

1. **让所有合同、任务、事件的到期信息在月历中直观呈现**
2. **通过 Web Push 提前多次提醒，确保不漏提醒**
3. **支持 CSV 批量导入，减少 90% 的手工录入**
4. **支持事件的标签、搜索、筛选，快速定位重要事项**

### 🎯 间接目标

- 让项目组建立统一的提醒系统
- 降低管理风险与重复沟通成本
- 提升团队协作效率

---

## **1.5 成功指标（Success Metrics）**

| 指标 | 目标值 |
| --- | --- |
| 批量导入 CSV 的成功率 | ≥ 95% |
| 用户成功收到 Web Push 通知率 | ≥ 90% |
| 用户手动创建事件耗时 | < 10 秒 |
| 查询某人事件的平均用时 | < 5 秒 |
| 事件漏提醒率 | < 5% |

---

# # **2. 用户画像与用户故事（Who / What）**

## **2.1 用户画像（Personas）**

---

### 👤 **Persona 1：项目助理（Primary User）**

- 年龄：22–30
- 负责外包人员合同、证件、档案管理
- 对技术熟悉度中等
- 每天处理大量 Excel、人员信息
- 最担心：漏记合同到期、被主管问责

**需求重点：**

- 批量导入合同到期
- 多次提醒
- 快速搜索人员信息
- 可视化查看本月到期热点

---

### 👤 Persona 2：项目主管（Secondary User）

- 关注项目风险
- 偶尔查看“未来 30 天到期”
- 不需要录入，但需要查看

**需求重点：**

- 筛选、搜索
- 查看风险高度集中的几天
- 收到关键提醒（如提前 7 天）

---

### 👤 Persona 3：人力（Support User）

- 需要导出、核对合同信息
- 偶尔导入大量人员信息

需求重点：

- CSV 导入导出
- 数据准确性

---

## **2.2 用户故事（User Stories）**

以下是符合 “As a… I want… so that…” 模式的用户故事。

---

### 📝 **新增事件**

作为 **项目助理**，

我希望可以在日历上长按某一天新增事项，

以便快速记录合同到期或任务。

---

### 📝 **批量导入事件**

作为 **项目助理**，

我希望通过 CSV 文件一次性导入大量人员合同到期日，

从而避免繁琐的手工录入。

---

### 📝 **多次提醒**

作为 **项目助理或主管**，

我希望对于重要合同能提前 7 天、3 天、1 天收到浏览器推送提醒，

以确保不会错过续签时机。

---

### 📝 **日历查看**

作为 **项目助理或主管**，

我希望通过月历形式快速查看某一天的所有事件，

从而了解未来的工作压力与风险热点。

---

### 📝 **搜索**

作为 **项目助理**，

我希望能够按员工姓名、标签搜索事件，

以快速找到某人的合同情况。

---

### 📝 **标签分类**

作为 **项目助理**，

我希望能给事件打上如“合同”“证件”“到期”等标签，

便于管理不同类别的提醒。

---

### 📝 **Web Push 通知**

作为 **项目助理**，

我希望无论浏览器是否打开都能收到提醒，

以确保不会遗漏重要事项。

# # **3. 功能需求（Functional Requirements）**

本章定义系统在“用户看得到、能操作到”的层面必须具备的行为，包括：登录、月历视图、事件管理、CSV 导入、提醒规则、Web Push 通知、搜索筛选以及设置页面。

---

## 3.1 功能范围总览（Scope Overview）

### 3.1.1 In-Scope（本版本必须实现）

1. **用户认证**
    - Email + 密码注册 / 登录 / 登出
    - 每个用户的数据相互隔离
2. **月历视图（Monthly Calendar）**
    - 月视图网格展示
    - 长按/右键新增事件
    - 支持拖拽调整日期
3. **事件管理（Event Management）**
    - 新增 / 编辑 / 删除事件
    - 支持标签、备注
4. **CSV 批量导入**
    - 从 CSV 文件中一次性导入大量事件
5. **提醒规则（Reminder Rules）**
    - **避开周末**：若提醒落在周末，自动提前至周五
    - 按标签配置提醒天数和时间
6. **Web Push 通知**
    - 离线提醒支持
7. **搜索与筛选**
    - 按标题/备注关键字搜索
    - 按标签多选筛选
8. **设置页面（Settings）**
    - 管理提醒规则与通知订阅

---

## 3.2 核心对象与概念（Domain Concepts）

### 3.2.1 提醒规则（Reminder Rule）

**新增特性：避开周末（Avoid Weekends）**

- 为了防止提醒在周末（非工作日）被忽略，用户可以开启此选项。
- 如果计算出的 `fireTime` 落在周六或周日，系统会自动将其调整为之前的周五。

---

## 3.3 功能模块详述

### 3.3.5 提醒规则 & Web Push 系统

**C. 提醒时间生成逻辑 (更新版)：**

对于每条 Event：

1. 确定“基准日期”：`date`
2. 确定“提醒时间”：...
3. 对 offsetsInDays 中的每一项 d：
    - 计算 `fireDate = date - d天`
    - **避开周末处理**：若 `avoidWeekends` 为 true 且 `fireDate` 为周六/周日：
        - 周六 → 提前 1 天 (周五)
        - 周日 → 提前 2 天 (周五)
    - `fireTime = fireDate + 对应时间`

---

# # **5. 数据结构（Data Model）**

## **5.3 ReminderRule（提醒规则）**

```tsx
ReminderRule {
  id: string
  userId: string
  label: string
  offsetsInDays: number[]
  defaultTime: string
  avoidWeekends: boolean           // 新增：是否避开周末
  createdAt: Date
}
```

---

# # **6. 验收标准（Acceptance Criteria）**

## **6.5 提醒规则（Reminder Rules）**

**避开周末验证：**
- 事件日期：2025-07-14 (周一)
- 规则：提前 1 天 + 避开周末
- 预期结果：提醒任务生成在 2025-07-11 (周五)

---

**最后更新**: 2025-12-26
