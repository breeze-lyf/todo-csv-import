# 新功能使用指南

## 🔍 搜索与筛选功能

### 功能位置
日历页面顶部，月份标题下方

### 使用方法

#### 1. 关键字搜索
- 在搜索框中输入关键字
- 系统会实时搜索事件的**标题**和**备注**
- 匹配的事件所在日期会显示**蓝色边框**高亮
- 点击搜索框右侧的 **X** 按钮清除搜索

**示例：**
```
搜索 "张三" → 显示所有标题或备注中包含"张三"的事件
搜索 "合同" → 显示所有与合同相关的事件
```

#### 2. 标签筛选
- 搜索框下方显示所有可用的标签（如：合同、证件、证书等）
- 点击标签切换选中状态：
  - **蓝色背景** = 已选中
  - **白色背景** = 未选中
- 可以同时选择多个标签
- 只显示包含选中标签的事件

**示例：**
```
选择 "合同" → 只显示标签为"合同"的事件
选择 "合同" + "证件" → 显示标签为"合同"或"证件"的事件
```

#### 3. 组合筛选
可以同时使用搜索和标签筛选：

**示例：**
```
搜索 "张三" + 选择 "合同" → 只显示张三的合同相关事件
```

#### 4. 清除筛选
- 点击 **"清除筛选"** 按钮重置所有筛选条件
- 或者手动清除搜索框和取消选中的标签

#### 5. 筛选统计
筛选激活时，会显示：
```
找到 5 个事件 (搜索: "张三") (标签: 合同)
```

---

## 📱 长按/右键快速创建事件

### 移动端（长按）

1. **长按**日历上的任意日期格子（约0.5秒）
2. 自动打开事件创建对话框
3. 日期已自动填充为你长按的日期
4. 填写标题等信息后保存

**提示：**
- 长按时间约500毫秒
- 如果不小心触发，可以点击对话框外部或"取消"按钮关闭

### 桌面端（右键）

1. **右键点击**日历上的任意日期格子
2. 自动打开事件创建对话框
3. 日期已自动填充
4. 填写信息后保存

**提示：**
- 右键会阻止浏览器默认菜单
- 这是快速创建事件的最快方式

---

## 🎯 拖拽调整事件日期

### 使用步骤

1. **鼠标悬停**在任意事件卡片上
   - 光标会变成**移动图标**（四向箭头）

2. **按住鼠标左键**开始拖拽
   - 被拖拽的事件会变成**半透明**

3. **拖动到目标日期**
   - 目标日期会显示**绿色背景**和**绿色边框**

4. **松开鼠标**
   - 弹出确认对话框：
     ```
     确认将"张三合同到期"从 2025-06-18 移动到 2025-06-20 吗？
     ```

5. **点击"确定"**完成移动
   - 事件日期已更新
   - 提醒任务自动重新生成

### 视觉反馈

| 状态 | 视觉效果 |
|------|---------|
| 正常事件 | 蓝色背景，鼠标悬停时深蓝色 |
| 可拖拽提示 | 鼠标变为移动图标 |
| 拖拽中 | 事件半透明（50%） |
| 目标日期 | 绿色背景 + 绿色边框 |

### 注意事项

- ✅ 可以拖拽到同一个月的任意日期
- ✅ 拖拽到原位置会自动取消
- ✅ 确认对话框可以取消操作
- ⚠️ 拖拽到其他月份需要先切换月份
- ⚠️ 拖拽会更新事件日期并重新生成提醒任务

---

## 💡 使用技巧

### 快速工作流

1. **批量导入** → 使用CSV导入大量事件
2. **标签筛选** → 按类型查看事件（如只看合同）
3. **关键字搜索** → 快速找到特定人员的事件
4. **拖拽调整** → 快速修改事件日期
5. **长按/右键** → 快速添加新事件

### 最佳实践

1. **使用标签分类**
   - 为不同类型的事件设置标签（合同、证件、证书等）
   - 便于后续筛选和管理

2. **善用搜索**
   - 搜索人名快速定位
   - 搜索关键词查找相关事件

3. **拖拽批量调整**
   - 如果多个事件需要延期，可以逐个拖拽
   - 比重新编辑更快捷

4. **长按快速创建**
   - 移动端使用长按比点击更快
   - 桌面端右键同样高效

---

## 🎨 界面说明

### 搜索区域
```
┌─────────────────────────────────────────┐
│ 🔍 搜索事件标题或备注...           [X]  │
├─────────────────────────────────────────┤
│ 标签筛选: [合同] [证件] [证书] 清除筛选 │
├─────────────────────────────────────────┤
│ 找到 3 个事件 (搜索: "张三")            │
└─────────────────────────────────────────┘
```

### 日历格子状态
```
┌──────────────┐
│ 18    [+2]   │  ← 右上角显示被筛选隐藏的事件数
├──────────────┤
│ [合同] 张三  │  ← 蓝色边框 = 包含筛选结果
│ [证件] 李四  │  ← 可拖拽（移动图标）
└──────────────┘
```

### 拖拽目标
```
┌──────────────┐
│ 20           │  ← 绿色背景 = 拖拽目标
├──────────────┤
│              │
│   放置于此   │
└──────────────┘
```

---

## ❓ 常见问题

### Q: 搜索不到事件？
A: 检查：
- 关键字是否正确
- 是否有标签筛选限制
- 事件是否在当前月份

### Q: 长按没反应？
A: 确保：
- 长按时间足够（约0.5秒）
- 没有在拖拽事件
- 浏览器支持触摸事件

### Q: 拖拽后事件消失？
A: 不会消失，可能是：
- 被筛选条件隐藏
- 移动到了其他月份（切换月份查看）

### Q: 如何撤销拖拽？
A: 两种方式：
- 拖拽到原位置
- 确认对话框点击"取消"

---

## 🚀 快捷键（计划中）

目前版本暂不支持快捷键，未来可能添加：
- `Ctrl/Cmd + F` - 聚焦搜索框
- `Esc` - 清除搜索
- `Ctrl/Cmd + Z` - 撤销拖拽

---

**祝使用愉快！** 🎉

如有问题，请查看 [完成总结文档](./COMPLETION_SUMMARY.md) 或联系开发团队。
